# ShareSlide - 股票数据可视化展示系统

## 项目概述

ShareSlide 是一个基于 Python 的股票数据可视化展示系统，它从 akshare 接口获取实时股票数据，并将其转换为适用于 Slidev 播放的 Markdown 文件或 HTML 幻灯片。该项目主要用于展示股票市场的实时数据、个股信息以及市场分析结果。

### 核心功能
- 从 akshare 接口获取 A 股市场实时数据
- 数据处理和清洗，包括计算市盈率、市值排名、净利润等指标
- 生成多种类型的股票数据幻灯片（全市场概览、个股详情、新闻资讯等）
- 支持缓存机制，避免重复请求数据
- 使用 Jinja2 模板引擎渲染 HTML 幻灯片
- 集成 ECharts 图表展示功能

### 技术栈
- **Python 3.13.7+**: 主要编程语言
- **AkShare**: 金融数据获取库
- **Jinja2**: 模板引擎
- **Pandas**: 数据处理和分析
- **Loguru**: 日志记录
- **Reveal.js**: HTML 幻灯片框架
- **ECharts**: 数据可视化图表库
- **Typer**: 命令行界面工具

## 项目结构

```
shareslide/
├── src/
│   └── myslide/
│       ├── templates/          # Jinja2 模板文件
│       ├── data_fetcher.py     # 数据获取器
│       ├── dailylib.py         # 数据处理库
│       ├── slide_render.py     # 幻灯片渲染器
│       ├── stock_single.py     # 个股幻灯片生成器
│       ├── models.py           # 数据模型定义
│       └── interfaces.py       # 接口定义
├── main.py                     # 主程序入口
├── play_single.py              # 个股展示入口
├── pyproject.toml              # 项目配置文件
├── README.md                   # 项目说明文档
└── cache/                      # 数据缓存目录
```

## 安装与运行

### 环境要求
- Python 3.13.7 或更高版本
- uv 包管理器（推荐）

### 安装步骤

1. **克隆项目并进入目录**
```bash
git clone <repository-url>
cd shareslide
```

2. **创建虚拟环境并安装依赖**
```bash
uv venv
source .venv/bin/activate  # Linux/macOS
# 或 .venv\Scripts\activate  # Windows

uv sync
```

3. **运行项目**
```bash
# 方式一：使用主程序菜单选择功能
python main.py

# 方式二：直接运行个股展示
python play_single.py
```

### 命令行工具

项目还提供了命令行工具 `bigslide`，可在安装后直接调用：

```bash
# 安装为可执行命令
pip install -e .

# 运行命令
bigslide
```

## 主要模块说明

### 1. 数据获取 (`data_fetcher.py`)
- 实现了多种数据源的获取方法（A股实时数据、上交所汇总、新闻资讯等）
- 支持本地缓存机制，避免重复网络请求
- 包含多个数据加载器类，如 `SpotEm`、`NewsEm`、`Cn399317`

### 2. 数据处理 (`dailylib.py`)
- 提供数据清洗和格式化功能
- 计算衍生指标如净利润、市值排名等
- 包含多种数据展示函数（基础统计、描述性统计、盈利比例等）

### 3. 模板渲染 (`slide_render.py`)
- 使用 Jinja2 模板引擎渲染 HTML 幻灯片
- 支持多种幻灯片类型（封面、表格、卡片、图表等）
- 集成 ECharts 图表渲染功能

### 4. 模型定义 (`models.py`)
- 定义了 `Deck` 类用于表示单个幻灯片页面
- 包含模板类型、数据内容、标题等属性

## 使用场景

### 全市场数据幻灯片
- 展示 A 股市场整体情况
- 包括成交额、总市值、净利润等关键指标
- 显示涨跌幅分布、市盈率统计等分析数据

### 个股展示幻灯片
- 展示特定股票的详细信息
- 包含价格、涨跌幅、市值、市盈率等指标
- 支持自定义关注的股票代码列表

### 新闻资讯展示
- 展示最新的财经新闻
- 提供摘要和发布时间信息

## 开发约定

### 代码风格
- 遵循 PEP 8 Python 代码风格指南
- 使用类型提示增强代码可读性
- 使用 Loguru 进行日志记录

### 测试
- 项目包含单元测试（位于 tests/ 目录）
- 使用 pytest 运行测试套件
- 在提交代码前确保所有测试通过

### 依赖管理
- 使用 uv 进行依赖管理
- 依赖关系定义在 pyproject.toml 文件中
- 锁定文件 uv.lock 确保环境一致性

## 输出文件

- **缓存文件**: 存储在 `cache/` 目录，包含每日获取的原始数据
- **输出文件**: 生成的 HTML 幻灯片存储在 `reveal/` 目录
- **样式文件**: 自定义 CSS 样式文件复制到输出目录

## 扩展功能

项目设计具有良好的扩展性，可以轻松添加：

1. 新的数据源支持
2. 更多的幻灯片模板类型
3. 不同的图表可视化方式
4. 自定义的指标计算逻辑
5. 更丰富的交互功能

## 故障排除

如果遇到问题，请检查：

1. 网络连接是否正常（数据获取需要网络）
2. Python 版本是否符合要求（3.13.7+）
3. 依赖包是否正确安装
4. 查看日志输出以获取详细错误信息

对于数据获取失败的问题，可能是由于 akshare 接口限制或网络问题，稍后再试通常可以解决。